# 1.5.1 ç”¨å¤–è¿žæŽ¥è¿›è¡Œè¡Œè½¬åˆ—--åˆ¶ä½œäº¤å‰è¡¨

## é—®é¢˜:

### å‡†å¤‡æ•°æ®:
```sql
create table courses(
    name varchar(100) not null, -- å‘˜å·¥åç§°
    course varchar(100) not null -- è¯¾ç¨‹
);
insert into courses(name, course)
            values('èµ¤äº•', 'SQLå…¥é—¨'),
                   ('èµ¤äº•', 'UNIXåŸºç¡€'),
                    ('é“ƒæœ¨', 'SQLå…¥é—¨'),
                    ('å·¥è—¤', 'SQLå…¥é—¨'),
                    ('å·¥è—¤', 'Javaå…¥é—¨'),
                    ('å‰ç”°', 'UnixåŸºç¡€'),
                    ('æ¸¡è¾¹', 'SQLå…¥é—¨');
/*
 name |  course
------+----------
 èµ¤äº• | SQLå…¥é—¨
 èµ¤äº• | UNIXåŸºç¡€
 é“ƒæœ¨ | SQLå…¥é—¨
 å·¥è—¤ | SQLå…¥é—¨
 å·¥è—¤ | Javaå…¥é—¨
 å‰ç”° | UnixåŸºç¡€
 æ¸¡è¾¹ | SQLå…¥é—¨
(7 rows)
*/
```

### ç”Ÿæˆå¦‚ä¸‹æ ¼å¼çš„äº¤å‰è¡¨:
```textmate
 name | SQLå…¥é—¨ | UnixåŸºç¡€ | Javaå…¥é—¨
------+---------+----------+----------
 å‰ç”° |         | âˆš        |
 å·¥è—¤ | âˆš       |          | âˆš
 æ¸¡è¾¹ | âˆš       |          |
 èµ¤äº• | âˆš       | âˆš        |
 é“ƒæœ¨ | âˆš       |          |
```

## è§£æ³•:

### è§£æ³•ä¸€(ä½¿ç”¨å…³è”å­æŸ¥è¯¢):
```sql
select c1.name,
      case when  exists (select *
                            from courses c2
                        where c2.name = c1.name
                            and c2.course = 'SQLå…¥é—¨') then 'âˆš'
        end as "SQLå…¥é—¨",
      case when exists (select *
                            from courses c2
                        where c2.name = c1.name
                            and c2.course = 'UnixåŸºç¡€') then 'âˆš'
            end as "UnixåŸºç¡€",
      case when exists (select *
                            from courses c2
                        where c2.name = c1.name
                            and c2.course = 'Javaå…¥é—¨') then 'âˆš'
                end as "Javaå…¥é—¨"
from courses c1 group by c1.name;
```

### è§£æ³•äºŒ(ä½¿ç”¨æ ‡é‡å­æŸ¥è¯¢):
```sql
select c1.name,
    (select 'âˆš'
        from courses c2
    where c1.name = c2.name and c2.course = 'SQLå…¥é—¨') as "SQLå…¥é—¨",
    (select 'âˆš'
        from courses c2
    where c1.name = c2.name and c2.course = 'UnixåŸºç¡€') as "UnixåŸºç¡€",
    (select 'âˆš'
        from courses c2
    where c1.name = c2.name and c2.course = 'Javaå…¥é—¨') as "Javaå…¥é—¨"
from courses c1
group by c1.name;
```

### è§£æ³•ä¸‰(åµŒå¥—ä½¿ç”¨caseè¡¨è¾¾å¼):
ðŸ¤“ ä¸Šé¢ä½¿ç”¨å­æŸ¥è¯¢çš„æ–¹å¼è™½ç„¶å¾ˆæ–¹ä¾¿,ä½†æ˜¯åœ¨selectå­å¥ä¸­ä½¿ç”¨æ ‡é‡å­æŸ¥è¯¢å’Œå…³è”è¥¿æŸ¥è¯¢çš„æ€§èƒ½å¼€é”€è¿˜æ˜¯å¾ˆå¤§çš„,
ä½¿ç”¨åµŒå¥—caseè¡¨è¾¾å¼å°±å¯ä»¥å‡å°‘å¼€é”€
```sql
select name,
        case when (sum(case when course = 'SQLå…¥é—¨' then 1 else 0 end)) > 0 then 'âˆš' end as "SQLå…¥é—¨",
        case when (sum(case when course = 'UnixåŸºç¡€' then 1 else 0 end)) > 0 then 'âˆš' end as "UnixåŸºç¡€",
        case when (sum(case when course = 'Javaå…¥é—¨' then 1 else 0 end)) > 0 then 'âˆš' end as "Javaå…¥é—¨"
    from courses
group by name;
```
