# 1.4.5 å…³ç³»é™¤æ³•è¿ç®—è¿›è¡Œè´­ç‰©ç¯®åˆ†æ

## èƒŒæ™¯é—®é¢˜
**å‡†å¤‡æ•°æ®:**
```sql
create table items(
    item varchar(100) not null -- å•†å“
);
insert into items(item)
            values('å•¤é…’'),
                   ('çº¸å°¿è£¤'),
                    ('è‡ªè¡Œè½¦');
/*
  item
--------
 å•¤é…’
 çº¸å°¿è£¤
 è‡ªè¡Œè½¦
(3 rows)
*/
create table shop_items(
    shop varchar(100) not null, -- åº—é“º
    item varchar(100) not null -- å•†å“
);
insert into shop_items(shop, item)
                values('ä»™å°', 'å•¤é…’'),
                        ('ä»™å°', 'çº¸å°¿è£¤'),
                        ('ä»™å°', 'è‡ªè¡Œè½¦'),
                        ('ä»™å°', 'çª—å¸˜'),
                        ('ä¸œäº¬', 'å•¤é…’'),
                        ('ä¸œäº¬', 'çº¸å°¿è£¤'),
                        ('ä¸œäº¬', 'è‡ªè¡Œè½¦'),
                        ('å¤§é˜ª', 'ç”µè§†'),
                        ('å¤§é˜ª', 'çº¸å°¿è£¤'),
                        ('å¤§é˜ª', 'è‡ªè¡Œè½¦');
/*
shop |  item
------+--------
 ä»™å° | å•¤é…’
 ä»™å° | çº¸å°¿è£¤
 ä»™å° | è‡ªè¡Œè½¦
 ä»™å° | çª—å¸˜
 ä¸œäº¬ | å•¤é…’
 ä¸œäº¬ | çº¸å°¿è£¤
 ä¸œäº¬ | è‡ªè¡Œè½¦
 å¤§é˜ª | ç”µè§†
 å¤§é˜ª | çº¸å°¿è£¤
 å¤§é˜ª | è‡ªè¡Œè½¦
*/
```

**é—®é¢˜:**
1. æ‰¾å‡ºåŒ…å«æ‰€æœ‰ç±»å‹å•†å“çš„åº—é“º;
2. æ‰¾å‡ºæ‰€æœ‰ä»…åŒ…å«itemsè¡¨ä¸­å•†å“çš„åº—é“º;

## é—®é¢˜ä¸€çš„è§£æ³•
```sql
-- æ³•ä¸€: ä½¿ç”¨å†…è¿æ¥
select si.shop
    from shop_items si, items i
where si.item = i.item
group by si.shop
having count(si.item) = (select count(*) from items);

-- æ³•äºŒ: 
select shop
    from shop_items
where item = any (select item from items)
group by shop
having count(distinct item) = (select count(*) from items);

/*
ğŸ¤”æ„Ÿè§‰ä¸Šæ–¹æ³•ä¸€æ›´åŠ ç®€æ´
*/
```

## é—®é¢˜äºŒè§£æ³•:
```sql
select si.shop
    from shop_items si
left outer join items i
    on si.item = i.item
group by si.shop
having count(si.item) = count(i.item);
/*
ğŸ¤“ è¿™é‡Œåˆ©ç”¨äº†count(col_name)ä¼šè¿‡æ»¤æ‰nullçš„ç‰¹æ€§
*/
```
